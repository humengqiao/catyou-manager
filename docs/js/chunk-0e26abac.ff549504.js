(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0e26abac"],{"09f0":function(e,t,i){var n,r,s;i("a4d3"),i("e01a"),i("d28b"),i("e260"),i("d3b7"),i("25f0"),i("3ca3"),i("ddb0"),function(i,o){r=[t],n=o,s="function"===typeof n?n.apply(t,r):n,void 0===s||(e.exports=s)}("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,(function(e){"use strict";function t(e,t){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)if(i.push(o.value),t&&i.length===t)break}catch(c){r=!0,s=c}finally{try{n||null==a["return"]||a["return"]()}finally{if(r)throw s}}return i}}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}))},"0d21":function(e,t,i){var n,r,s;(function(i,o){r=[t],n=o,s="function"===typeof n?n.apply(t,r):n,void 0===s||(e.exports=s)})("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,(function(e){"use strict";function t(e){if(Array.isArray(e))return e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}))},"0f15":function(e,t,i){"use strict";i.r(t);var n=i("124e"),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},"0f9f":function(e,t,i){"use strict";var n=i("6bb0"),r=i.n(n);r.a},1199:function(e,t,i){"use strict";i.r(t);var n=i("a5a8"),r=i("3ecb");for(var s in r)"default"!==s&&function(e){i.d(t,e,(function(){return r[e]}))}(s);i("aa8f");var o=i("2877"),a=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"3a620e50",null);t["default"]=a.exports},"124e":function(e,t,i){var n,r,s;i("a4d3"),i("99af"),i("4de4"),i("c740"),i("4160"),i("d81d"),i("a434"),i("b0c0"),i("e439"),i("dbb4"),i("b64b"),i("159b"),function(o,a){r=[t,i("2909"),i("3835"),i("96cf"),i("1da1"),i("ade3"),i("2f62"),i("1199"),i("1cb7")],n=a,s="function"===typeof n?n.apply(t,r):n,void 0===s||(e.exports=s)}("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,(function(e,t,n,r,s,o,a,c,u){"use strict";var f=i("4ea4");function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function d(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){(0,o.default)(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,t=f(t),n=f(n),s=f(s),o=f(o),c=f(c),u=f(u);var p={name:"PermissionModify",components:{TitleSection:c.default,Divider:u.default},data:function(){return{list:[],selectedPermissionList:[],permissionList:[],permissionModifyLoading:!1}},computed:d({},(0,a.mapGetters)({user:"userGetter"})),mounted:function(){this.setBreadList(),this.fetchAllPermissionList(),this.fetchSelectedPermissioList()},methods:d({fetchAllPermissionList:function(){var e=(0,s.default)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.permissionLoading=!0,e.prev=1,e.next=4,this.$service.permissionService.getAllPermissionList();case 4:t=e.sent,t&&(this.list=t.map((function(e){var t=e.path,i=e.name,n=e.objectId,r=e.disabled,s=e.icon,o=e.show;return{key:n,label:i,value:t,navigationDisabled:r,icon:s,show:o}}))),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$message.error(e.t0);case 11:return e.prev=11,this.permissionLoading=!1,e.finish(11);case 14:case"end":return e.stop()}}),e,this,[[1,8,11,14]])})));function t(){return e.apply(this,arguments)}return t}(),fetchSelectedPermissioList:function(){var e=(0,s.default)(regeneratorRuntime.mark((function e(){var t,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=this.$route.params.username,e.prev=1,e.next=4,this.$service.permissionService.getUserSelectedPermissionList(t);case 4:i=e.sent,i&&(this.selectedPermissionList=i.map((function(e){var t=e.objectId;return t})),this.permissionList=i.map((function(e){var t=e.objectId;return t}))),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](1),this.$message.error(e.t0);case 11:case"end":return e.stop()}}),e,this,[[1,8]])})));function t(){return e.apply(this,arguments)}return t}(),onHandleConfirmPermission:function(){var e=(0,s.default)(regeneratorRuntime.mark((function e(){var t,i,n,r,s,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=1,i=this.list,n=this.$route.params.username,r=this.selectedPermissionList,s=r.map((function(e){var n=i.findIndex((function(t){var i=t.key;return i===e}));if(-1!==n){var r=i[n],s=r.value,o=r.icon,a=r.label,c=r.show,u=r.navigationDisabled;return{path:s,icon:o,name:a,show:c,navigationDisabled:u,sort:t++}}})).filter((function(e){return!!e})),this.permissionModifyLoading=!0,o={username:n,list:s},e.prev=7,e.next=10,this.$service.permissionService.updateUserPermission(o);case 10:this.$message.success("用户权限修改成功"),e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](7),this.$message.error(e.t0);case 16:if(e.prev=16,this.permissionModifyLoading=!1,n===this.user.username){e.next=20;break}return e.abrupt("return");case 20:return this.$notify({title:"提示",message:"即将刷新页面...",type:"warning",duration:2e3}),setTimeout((function(){window.location.reload()}),2e3),e.finish(16);case 23:case"end":return e.stop()}}),e,this,[[7,13,16,23]])})));function t(){return e.apply(this,arguments)}return t}(),setBreadList:function(){this.setBread([{path:"/dashboard/permission",name:"权限管理"},{path:"/dashboard/permission/modify",name:"修改"}])},onClickSortItem:function(e,t,i){e.stopPropagation(),e.preventDefault();var n=/^up$/i.test(i),r=/^down$/i.test(i),s=this.permissionList.findIndex((function(e){return e===t})),o=this.selectedPermissionList.findIndex((function(e){return e===t}));if(-1!==s){if(n){if(0===s)return;this.permissionList.splice(s,1),this.permissionList.splice(s-1,0,t);var a=s-1,c=this.permissionList[a],u=-1!==this.selectedPermissionList.findIndex((function(e){return e===c}));if(!u)return;-1!==o&&(this.selectedPermissionList.splice(o,1),this.selectedPermissionList.splice(o-1,0,t))}if(r){if(s===this.permissionList.length-1)return;this.permissionList.splice(s,1),this.permissionList.splice(s+1,0,t);var f=s+1,l=this.permissionList[f],d=-1!==this.selectedPermissionList.findIndex((function(e){return e===l}));if(!d)return;-1!==o&&(this.selectedPermissionList.splice(o,1),this.selectedPermissionList.splice(o+1,0,t))}}},selectedPermissionChange:function(e,t){var i=(0,n.default)(t,1),r=i[0];console.log(e,r)},selectedPermissionRightChange:function(e,i){var r=(0,n.default)(i,1),s=r[0],o=this.selectedPermissionList,a=o.findIndex((function(e){return e===s}));-1===a?o=o.concat(s):o.splice(a,1);var c=this.permissionList.filter((function(e){return-1!==o.findIndex((function(t){return t===e}))}));this.selectedPermissionList=(0,t.default)(c)},renderTransferItem:function(e,t){var i=this,n=t.key,r=t.label,s=t.icon,o=this.$createElement,a=this.permissionList.findIndex((function(e){return e===n}));return o("span",-1!==a?[o("span",[s&&o("i",{class:s,style:"font-size: 14px;margin-right: 5px;"}),o("span",[r])]),o("span",{style:"float: right;margin-top: 6px;"},[o("i",0!==a?{class:"el-icon-top",style:{fontSize:"16px",marginRight:a===this.permissionList.length-1?"0":"5px"},on:{click:function(e){return i.onClickSortItem(e,n,"UP")}}}:{style:"margin-right: 5px;"}),a!==this.permissionList.length-1&&o("i",{class:"el-icon-bottom",style:"font-size: 16px;",on:{click:function(e){return i.onClickSortItem(e,n,"DOWN")}}})])]:[s&&o("i",{class:s,style:"font-size: 14px;margin-right: 5px;"}),o("span",[r])])}},(0,a.mapActions)(["setBread","fetchUserPermissionList"]))};e.default=p}))},"1cb7":function(e,t,i){"use strict";i.r(t);var n=i("8498"),r=i("f451");for(var s in r)"default"!==s&&function(e){i.d(t,e,(function(){return r[e]}))}(s);i("0f9f");var o=i("2877"),a=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"3e6bfee2",null);t["default"]=a.exports},3835:function(e,t,i){var n,r,s;(function(o,a){r=[t,i("0d21"),i("09f0"),i("3d8c")],n=a,s="function"===typeof n?n.apply(t,r):n,void 0===s||(e.exports=s)})("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,(function(e,t,i,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function s(e,r){return(0,t.default)(e)||(0,i.default)(e,r)||(0,n.default)()}Object.defineProperty(e,"__esModule",{value:!0}),e.default=s,t=r(t),i=r(i),n=r(n)}))},"3d8c":function(e,t,i){var n,r,s;(function(i,o){r=[t],n=o,s="function"===typeof n?n.apply(t,r):n,void 0===s||(e.exports=s)})("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,(function(e){"use strict";function t(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=t}))},"3ecb":function(e,t,i){"use strict";i.r(t);var n=i("6733"),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},6733:function(e,t,i){var n,r,s;i("a9e3"),function(i,o){r=[t],n=o,s="function"===typeof n?n.apply(t,r):n,void 0===s||(e.exports=s)}("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={name:"TitleCount",props:{title:{required:!0,type:String,default:""},count:{type:[String,Number],default:0},unit:{type:String,default:"个"}}};e.default=t}))},"6bb0":function(e,t,i){},"6c43":function(e,t,i){"use strict";var n=i("db1d"),r=i.n(n);r.a},8200:function(e,t,i){var n,r,s;(function(i,o){r=[t],n=o,s="function"===typeof n?n.apply(t,r):n,void 0===s||(e.exports=s)})("undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self&&self,(function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={name:"Divider"};e.default=t}))},8498:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"divider-container"})},r=[];i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}))},a434:function(e,t,i){"use strict";var n=i("23e7"),r=i("23cb"),s=i("a691"),o=i("50c4"),a=i("7b0b"),c=i("65f0"),u=i("8418"),f=i("1dde"),l=i("ae40"),d=f("splice"),p=l("splice",{ACCESSORS:!0,0:0,1:2}),h=Math.max,m=Math.min,v=9007199254740991,b="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!d||!p},{splice:function(e,t){var i,n,f,l,d,p,y=a(this),g=o(y.length),L=r(e,g),P=arguments.length;if(0===P?i=n=0:1===P?(i=0,n=g-L):(i=P-2,n=m(h(s(t),0),g-L)),g+i-n>v)throw TypeError(b);for(f=c(y,n),l=0;l<n;l++)d=L+l,d in y&&u(f,l,y[d]);if(f.length=n,i<n){for(l=L;l<g-n;l++)d=l+n,p=l+i,d in y?y[p]=y[d]:delete y[p];for(l=g;l>g-n+i;l--)delete y[l-1]}else if(i>n)for(l=g-n;l>L;l--)d=l+n-1,p=l+i-1,d in y?y[p]=y[d]:delete y[p];for(l=0;l<i;l++)y[l+L]=arguments[l+2];return y.length=g-n+i,f}})},a5a8:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"title-container"},[i("h3",{staticClass:"title"},[e._v(e._s(e.title))]),e._t("default",[i("div",{staticClass:"total"},[e._v("共"),i("strong",{staticStyle:{color:"#ff0000"}},[e._v(e._s(e.count))]),e._v(e._s(e.unit))])])],2)},r=[];i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}))},aa8f:function(e,t,i){"use strict";var n=i("cfa7"),r=i.n(n);r.a},cfa7:function(e,t,i){},db1d:function(e,t,i){},f451:function(e,t,i){"use strict";i.r(t);var n=i("8200"),r=i.n(n);for(var s in n)"default"!==s&&function(e){i.d(t,e,(function(){return n[e]}))}(s);t["default"]=r.a},f487:function(e,t,i){"use strict";i.r(t);var n=i("f4be"),r=i("0f15");for(var s in r)"default"!==s&&function(e){i.d(t,e,(function(){return r[e]}))}(s);i("6c43");var o=i("2877"),a=Object(o["a"])(r["default"],n["a"],n["b"],!1,null,"092d19f9",null);t["default"]=a.exports},f4be:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"modify-container"},[i("title-section",{attrs:{title:"用户权限配置"}},[i("divider",{staticClass:"divider"})],1),i("div",{staticClass:"modify-content-container"},[i("el-transfer",{attrs:{titles:["所有权限","已选权限"],"filter-placeholder":"请输入权限名",filterable:"","left-default-checked":e.selectedPermissionList,"right-default-checked":e.selectedPermissionList,data:e.list,"render-content":e.renderTransferItem,"target-order":"push"},on:{"right-check-change":e.selectedPermissionRightChange,change:function(t,i){return"left"===i&&(e.selectedPermissionList=[])}},model:{value:e.permissionList,callback:function(t){e.permissionList=t},expression:"permissionList"}})],1),i("div",{staticClass:"btn-container"},[i("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.$router.back()}}},[e._v("返回")]),i("el-button",{attrs:{type:"primary",loading:e.permissionModifyLoading},on:{click:e.onHandleConfirmPermission}},[e._v("保存")])],1)],1)},r=[];i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return r}))}}]);
//# sourceMappingURL=chunk-0e26abac.ff549504.js.map